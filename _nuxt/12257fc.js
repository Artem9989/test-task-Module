(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{230:function(t,e,n){var content=n(236);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(116).default)("f1c755a4",content,!0,{sourceMap:!1})},232:function(t,e,n){t.exports=n.p+"https://github.com/Artem9989/test-task-Module/blob/master/_nuxt/img/spinner.d3fbaf2.gif"},235:function(t,e,n){"use strict";n(230)},236:function(t,e,n){var o=n(115)(!1);o.push([t.i,"input[data-v-2728fcde]{outline:none}.preload[data-v-2728fcde]{text-align:center}.preload__img[data-v-2728fcde]{height:80px}.error[data-v-2728fcde]{color:red;font-size:1rem;margin:0}.popup[data-v-2728fcde]{position:fixed;z-index:1;left:50%;top:50%;display:flex;align-items:center;flex-direction:column;justify-content:center;overflow:auto;transform:translate(-50%,-50%);width:100%;height:100vh;background-color:rgba(0,0,0,.7)}.content[data-v-2728fcde]{width:619px;height:425px;background:#fff}.content__close[data-v-2728fcde]{float:right;font-size:42px;font-weight:lighter;color:#000;height:38px;width:38px;cursor:pointer;line-height:1em}.submit__info[data-v-2728fcde]{margin:10px 0;height:30px;width:100%;max-width:331px;padding:7px 11px 8px;border:1px solid #ccc;box-sizing:border-box;border-radius:3px}.submit__info--btn[data-v-2728fcde]{background:#4997d0;cursor:pointer;color:#fff}.content__wrap[data-v-2728fcde]{display:flex;flex-direction:column;flex-wrap:wrap;margin:30px;width:54%;height:395px}.content__img[data-v-2728fcde]{width:100%;height:205px;-o-object-fit:cover;object-fit:cover;border-radius:3px;max-width:331px}.comments__text[data-v-2728fcde]{margin:5px 0 20px;word-wrap:break-word}.comments__date[data-v-2728fcde]{color:#999;margin:0;word-wrap:break-word}.container-comments[data-v-2728fcde]{width:60%;margin-top:5px;line-height:15px;font-size:13px;overflow:auto;padding:0 3px 0 0;margin-left:14px;height:365px}.container-comments[data-v-2728fcde]::-webkit-scrollbar{width:5px;background-color:#f9f9fd}.container-comments[data-v-2728fcde]::-webkit-scrollbar-thumb{width:5px;background-color:#ececec}.comments[data-v-2728fcde]{display:flex;flex-direction:column;width:100%}.submit[data-v-2728fcde]{margin-top:20px}@media (max-height:430px){.popup[data-v-2728fcde]{height:50vh;padding-top:50vh}}@media (max-width:600px){.error[data-v-2728fcde]{color:red;font-size:1rem;margin:10px 22px}.popup[data-v-2728fcde]{position:fixed;z-index:999;left:0;top:0;display:block;overflow-x:hidden;transform:translate(0);width:100%;height:100vh;padding-top:0;background-color:#fff}.content[data-v-2728fcde]{width:100vw;height:100vh;background:#fff}.content__close[data-v-2728fcde]{position:absolute;top:0;right:0;color:#ccc}.submit__info[data-v-2728fcde]{margin:10px 22px;width:calc(100% - 44px);max-width:100%}.submit__info--btn[data-v-2728fcde]{background:#4997d0;cursor:pointer}.content__wrap[data-v-2728fcde]{flex-direction:row;margin:0 auto;width:100%}.content__img[data-v-2728fcde]{height:auto;max-width:100%}form[data-v-2728fcde]{margin:1px}.container-comments[data-v-2728fcde]{order:0;width:100%;max-height:50vh;margin:22px 0 0 22px;padding:0 17px 0 0;height:auto}.submit[data-v-2728fcde]{order:1;margin-top:10px}}",""]),t.exports=o},239:function(t,e,n){"use strict";n.r(e);var o=n(6),r=(n(30),n(62),n(41),{props:["imgId"],data:function(){return{image:[],text:null,name:null,loading:"Отправить комментарий",errorMessage:null}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://boiling-refuge-66454.herokuapp.com/images/".concat(t.imgId));case 2:t.image=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{closePopup:function(){this.$emit("closePopup")},addReview:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading="Отправляется...",n.next=3,e.$axios.$post("https://boiling-refuge-66454.herokuapp.com/images/".concat(e.imgId,"/comments"),{comment:t.text,name:t.name}).then((function(n){e.loading="Отправить комментарий",e.image.comments.push(t)})).catch((function(t){setTimeout((function(){return e.errorMessage=null}),3e3),e.loading="Отправить комментарий";var n=t.response.data.errors;e.errorMessage=n?n.name||n.comment:"Ошибка: ".concat(n)}));case 3:case"end":return n.stop()}}),n)})))()},onSubmit:function(){var t={name:this.name,text:this.text,id:Date.parse(new Date),date:Date.parse(new Date)};this.addReview(t),this.name=null,this.text=null}}}),c=(n(235),n(42)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade",appear:""}},[o("div",{staticClass:"popup"},[o("div",{staticClass:"content"},[o("span",{staticClass:"content__close",on:{click:t.closePopup}},[t._v("×")]),t._v(" "),o("div",{staticClass:"content__wrap"},[o("div",{staticClass:"content__img"},[t.image.url?o("img",{staticClass:"content__img",attrs:{src:t.image.url,alt:"Тут была картинка, потерялась",title:"Картинка"}}):o("div",{staticClass:"preload"},[o("img",{staticClass:"preload__img",attrs:{src:n(232)}})])]),t._v(" "),o("form",{staticClass:"submit",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t.errorMessage?o("div",{staticClass:"error"},[t._v("\n            "+t._s(t.errorMessage)+"\n          ")]):t._e(),o("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"submit__info",attrs:{required:"",type:"text",placeholder:"Ваше имя"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"submit__info",attrs:{type:"text",placeholder:"Ваш коментарий"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),o("input",{staticClass:"submit__info submit__info--btn",attrs:{type:"submit"},domProps:{value:t.loading}})]),t._v(" "),o("div",{staticClass:"container-comments"},[t._l(t.image.comments,(function(e){return o("div",{key:e.id,staticClass:"comments"},[e.date<(new Date).setHours(0,0,0,0)?o("span",{staticClass:"comments__date"},[t._v("\n              "+t._s(e.name)+"\n              "+t._s(new Date(e.date).toLocaleDateString())+"\n            ")]):o("span",{staticClass:"comments__date"},[t._v("\n              "+t._s(e.name)+"\n              "+t._s(new Date(e.date).toLocaleTimeString()))]),t._v(" "),o("span",{staticClass:"comments__text",attrs:{title:e.text}},[t._v("\n              "+t._s(e.text))])])})),t._v(" "),0==t.image.comments?o("span",{staticClass:"comments__text"},[t._v("\n            Коментарии отсутствуют")]):t._e()],2)])])])])}),[],!1,null,"2728fcde",null);e.default=component.exports}}]);